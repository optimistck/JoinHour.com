{% extends base_layout %}


{% block header_title %}

{% endblock %}


{% block content %}

    <!-- If User logged in -->
    {% if user_id %}
        {% if is_mobile %}
            <div class="alert alert-info">
                <i class="icon-edit icon-large"></i> Post your <a href="{{ uri_for("join") }}">interest</a>, browse open <a href="{{ uri_for("activity") }}">activities</a>, or read user <a href="{{ uri_for("how") }}">experiences</a>.<BR>
            </div>
        {% else %}
            <ul class="thumbnails team">
                <li class="span4">
                    <div class="thumbnail-style">
                        <a href="{{ uri_for("join") }}"><img src="../img/2.x.One.jpg" alt="" class="img-rounded"/></a>
                        <h3><a href="{{ uri_for("join") }}">Post</a> <small>Pick an interest & set availability.</small></h3>
                        <p></p>
                    </div>
                </li>
                <li class="span4">
                    <div class="thumbnail-style">
                        <a href="{{ uri_for("activity") }}"><img src="../img/2.x.Two.jpg" alt="" class="img-rounded"/></a>
                        <h3><a href="{{ uri_for("activity") }}">Browse</a> <small>Join activities on the Live Board.</small></h3>
                        <p></p>
                    </div>
                </li>
                <li class="span4">
                    <div class="thumbnail-style">
                        <a href="{{ uri_for("how") }}"><img src="../img/2.x.Three.jpg" alt="" class="img-rounded"/></a>
                        <h3><a href="{{ uri_for("how") }}">Experiences</a> <small>See how your neighbors use JoinHour.</small></h3>
                        <p></p>
                    </div>
                </li>
            </ul><!--/thumbnails-->
        {% endif %}

        <div>
            <ul class="nav nav-tabs">
                <li class="active">
                    <a href="#pane1" data-toggle="tab">Interests You Posted</a>
                </li>
            </ul>
        </div>
        <div class="tab-content">
            {% include "interest2activity_popup.html" %}
            <div id="pane1" class="tab-pane active">
                <hr/>
                <div id="events" class="media">
                    {% for event in  my_interests%}
                        {% if event.status in ['CLOSED','CANCELLED','EXPIRED'] %}
                            {% continue %}
                        {% endif %}
                        {{ macros.show_event(event,username,event_attributes_list) }}
                    {% endfor %}
                </div>
            </div>
        </div><!-- /.tab-content -->
    <!-- NOT logged in -->
    {% else %}
<!--=== Purchase Block ===-->
<div class="row-fluid purchase margin-bottom-30">
    <div class="container">
		<div class="span9">
            <span>Actipond: activity partners on demand</span>
            <p>Do stuff with non-friends. Placeholder.</p>
        </div>
        <a href="#" class="btn-buy hover-effect">Sign Up</a>
    </div>
</div><!--/row-fluid-->
<!-- End Purchase Block -->
    {% endif %}

{% endblock %}

{% block mediaJS %}
    <script src='/_ah/channel/jsapi'></script>
    <script type="text/javascript">
        $().ready(function () {
            $(function () {
                $("#accordion").accordion({
                    heightStyle: "fill"
                });
            });
            $(function () {
                $("#accordion-resizer").resizable({
                    minHeight: 140,
                    minWidth: 200,
                    resize: function () {
                        $("#accordion").accordion("refresh");
                    }
                });
            });
            $("#form_login_user").validate({
                submitHandler: function (form) {
                    form.submit();
                },
                errorPlacement: function (error, element) {
                    element.parent().parent().addClass("error");
                    error.addClass("help-inline").appendTo(element.parent());
                }
            });

            $("#form_register").validate({
                submitHandler: function (form) {
                    form.submit();
                },
                rules: {
                    password: 'required',
                    c_password: {
                        required: true,
                        equalTo: '#password'
                    }
                },
                errorPlacement: function (error, element) {
                    element.parent().parent().addClass("error");
                    error.addClass("help-inline").appendTo(element.parent());
                }
            });

            $("#building_name").typeahead({
                source: function (query, process) {
                    states = [];
                    map = {};

                    $.get('/allbuildings/', function(data) {
                        $.each(data, function (i, building) {
                            map[building.building_name] = building;
                            states.push(building.building_name);

                        });
                        process(states);
                    });
                }
            });

            $("#password").passStrength({
                shortPassText: '{% trans %}Short Password{% endtrans %}',
                badPassText: '{% trans %}Insecure Password{% endtrans %}',
                goodPassText: '{% trans %}Good Password{% endtrans %}',
                strongPassText: '{% trans %}Secure Password{% endtrans %}'
            });
            $(document).on("click", ".open-cancel-confirm-dialog", function () {
                var activity_id = $(this).data('id');
                $(".modal-body #activity_id").val(activity_id);
                $('#cancel_modal').modal('show');
            });
            $("#cancel_activity_id").click(function () {
                document.location.href = '/?key=' + $("#activity_id").val() + "&action=cancel&reason=" + $("#cancellation_reason").val();
            });
        });

    </script>
{% endblock %}

