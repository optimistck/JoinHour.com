{% extends base_layout %}

{% block title %}
    {% trans %}Live Activity Board{% endtrans %} - {{ app_name }}
{% endblock %}
{% block header_title %}
    {% trans %}Live Activity Board{% endtrans %}
{% endblock %}

{% block content %}

    {% trans %}Browse all open activities and interests for your building.{% endtrans %}
    <BR><BR>


    <H3>Activities you can join now</H3>

    <table class="table table-striped table-bordered">

        <thead>
        <tr>
            <th>Category</th>
            <th>Spots</th>
            <th>Duration</th>
            <th>Expires in</th>
            <th>Join activity?</th>
            <th>Details</th>
        </tr>
        </thead>

        {% for a in activities %}
            <tr>
                <TD>{{ a.category }}</TD>
                <TD>{{ a.key.urlsafe() |spots_remaining()}}</TD>
                <TD>{{ a.duration }}</TD>
                <TD>{{ a.key.urlsafe() |expires_in('Activity')  | minute_format}}</TD>
                <TD><a href="/join_activity/?key={{ a.key.urlsafe() }}">
                    <button class="btn btn-primary">JOIN</button>
                </a></TD>

                <TD>
                    <a href="/activity_detail/?ID={{ a.key.urlsafe() }}">
                        <button class="btn btn-primary">Details</button>
                    </a>
                </TD>
            </tr>
        {% endfor %}
    </table>

    </fieldset>

    <H3>Interests ready for a match</H3>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Interest</th>
            <th>Expires In</th>
            <th>Convert to Activity?</th>
        </tr>
        </thead>
        <div id="cancel_modal" class="modal hide fade">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="false">&times;</button>
                <h3>Convert this Interest to an Activity</h3>
            </div>

            <form action="/convert_to_activity/" method="post">
                <div class="modal-body">
                <input type="hidden" name="exception" value="{{ exception }}">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="interest_id" id="interest_id">
                    <div class="control-group">
                        <label class="control-label" for="min_number_of_people_to_join">with min </label>
                        <select id="min_number_of_people_to_join" name="min_number_of_people_to_join">
                            <option value="1 person">1 person</option>
                            <option value="2 people">2 people</option>
                            <option value="3 people">3 people</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="max_number_of_people_to_join">no more
                            than </label>

                        <div class="controls">
                            <select id="max_number_of_people_to_join" name="max_number_of_people_to_join">
                                <option value="1 person">1 person</option>
                                <option value="2 people">2 people</option>
                                <option value="3 people">3 people</option>
                                <option value="4 people">4 people</option>
                                <option value="5 people">5 people</option>
                                <option value="No limit">No limit</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="note">Details *</label>

                        <div class="controls">
                            <input class="input-xlarge focused required" id="note" name="note"
                                   placeholder="e.g., where we're meeting and  going" type="text" value="">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                <input type="submit" value="Convert" name="commit" id="message_submit" class="btn btn-primary"/>
                    <a id="close"  href="#"><button class="btn btn-primary">Cancel</button></a>
                </div>
            </form>

        </div>
        {% for i in interests %}
            <tr>
                <td>{{ i.category }}</td>
                <td>{{ i.key.urlsafe() | expires_in('Interest')  | minute_format}}</td>
                <td>
                    <a href="#cancel_modal" role="button" class="open-cancel-confirm-dialog btn btn-primary"
                       data-toggle="modal" data-id="{{ i.key.urlsafe()}}">Yes</a></td>
            </tr>
        {% endfor %}

    </table>

    See an interest you like? Create an activity and connect!
    <BR><BR><BR><BR>



{% endblock %}

{% block mediaJS %}
    <script type="text/javascript">
        $().ready(function () {
            $("#form_contact").validate({
                errorPlacement: function (error, element) {
                    element.parent().parent().addClass("error");
                    error.addClass("help-inline").appendTo(element.parent());
                }
            });
            $(document).on("click", ".open-cancel-confirm-dialog", function () {
                var interest_id = $(this).data('id');
                $(".modal-body #interest_id").val(interest_id);
                $('#cancel_modal').modal('show');
            });
        });
    </script>
{% endblock %}

